# 1.검색어 자동완성 시스템에서 순위 모델 바뀌어 최근 검색어에 보다 높은 가중치를 주는 방법
💡 구글의 방법 : https://support.google.com/websearch/answer/7368877?hl=ko#zippy=%2C%EC%9E%90%EB%8F%99-%EC%99%84%EC%84%B1-%EC%98%88%EC%83%81-%EA%B2%80%EC%83%89%EC%96%B4%EA%B0%80-%EC%83%9D%EC%84%B1%EB%90%98%EB%8A%94-%EB%B0%A9%EB%B2%95
💡 자동완성을 위한 확장 가능한 접두사 검색 서비스 : https://medium.com/@prefixyteam/how-we-built-prefixy-a-scalable-prefix-search-service-for-powering-autocomplete-c20f98e2eff1

1. 시간 가중치 모델 (Time-weighted model)
  최근 검색어일수록 높은 가중치를 부여하는 방식입니다. 이 방법은 검색어의 시간이 지날수록 그 검색어의 중요도가 감소하도록 설계됩니다. 예를 들어:

  최근 1시간 내의 검색어: 가중치 1.0
  1시간 전 검색어: 가중치 0.8
  1일 전 검색어: 가중치 0.5
  1주일 전 검색어: 가중치 0.2
  이 방법의 구현 예시:
  
  각 검색어의 가중치를 계산할 때, 해당 검색어의 타임스탬프를 기반으로 점수를 주는 방식입니다. 이를 통해 더 최근에 검색된 항목이 상위에 나타날 수 있습니다.

2. 순위 조정 알고리즘
  검색어를 제시할 때, 최근 검색어에 우선순위를 주도록 순위 산정 기준을 조정하는 방법입니다. 예를 들어:

  로그 기반 모델 (Log-based model): 로그 값으로 최근 검색어에 높은 점수를 주고, 시간이 지날수록 점수를 로그 스케일로 낮추는 방식.
  선형 가중치 모델: 검색어의 발생 시간에 따라 선형적으로 가중치를 줄여주는 방식입니다.

3. 개별 사용자 맞춤형 모델 (Personalization)
  사용자의 검색 기록을 기반으로 최근 검색어에 더 높은 가중치를 부여하는 모델입니다. 사용자가 특정 주제나 제품을 자주 검색한다면 그 주제나 제품에 대한 가중치를 높이고, 그 검색어가 자동완성 결과에 상위에 노출되게 됩니다.

  개인화된 검색어 모델 예시:

  최근 검색어뿐만 아니라, 사용자별 검색 패턴을 반영하여 가중치를 동적으로 부여합니다.
  예를 들어 사용자가 "노트북"과 "스마트폰"을 자주 검색한다면, 이 두 키워드에 대해서 최근 검색순위는 물론, 사용자의 검색 패턴에 맞춰 우선적으로 추천해줄 수 있습니다.

4. 가중치 동적 조정 (Dynamic Weighting)
  검색어 자동완성 시스템의 가중치를 실시간으로 동적으로 조정하는 방법입니다. 예를 들어, 사용자에게 추천되는 검색어 리스트에서 최근 검색어의 가중치를 실시간으로 높여주는 알고리즘을 적용합니다.

  예시:

  시간 기반: 최근 5분 이내 검색한 단어는 1.2배 가중치, 1시간 이내는 1.1배 가중치, 하루는 1배로 계산하는 방식. 상황적 기준(시간, 트렌드, 이벤트)
  사용자 기반: 사용자의 최근 검색 기록을 반영하여 그들이 관심 있을 만한 키워드에 더 높은 가중치를 부여합니다.

5. 검색어 기억 모델 (Recurrent or Memory-based Model)
  과거에 검색한 항목을 '기억'하고, 최근에 더 자주 사용된 검색어를 우선적으로 제공하는 방법입니다. 이 모델은 사용자의 검색 습관을 학습하고 그 정보를 반영하여 자동완성 결과를 조정합니다.

  예시: 최근 검색어 목록을 저장하고, 그 목록에서 더 자주 등장한 검색어를 자동완성에 우선적으로 포함시킵니다.


# 2. 실시간 검색어 자동완성 시스템 구축시 스트림 형태 데이터는 모든 데이터 한 번에 동시 사용 불가. 스트림 프로세싱에는 특별 시스템 필요 ➡️ 아파치 하둡 맵리듀스, 아파치 스파크 스트리밍, 아파치 스톰, 아파치 카프카 사용
  - 이유
    * 계속 새 데이터 발생. ex. 수백만 사용자 동시 검색어 입력, 모든 데이터를 메모리 한 번에 올리거나 배치 어려움
    * 저장소 비용 큼
    * 빠른 반응과 실시간 업데이트 필요 ➡️ 스트림 프로세싱 필요.

1) 아파치 하둡 맵리듀스
- 기존 배치 처리용 도구지만 대규모 데이터 분산 처리가 가능.
- 장점: 안정적이고, 대량의 데이터를 분산 처리하는 데 강력함.
- 단점: 실시간 처리에는 부적합. 주로 과거 데이터 분석이나 배치 작업에 사용.
- 💡 사용 예시: 과거 검색어 데이터를 분석해 기본 추천 키워드 세트 생성.

2) 아파치 스파크 스트리밍
- 실시간 데이터 스트림 처리와 배치 처리 모두 지원.
- 장점: 메모리 기반 처리로 빠르고 유연하며, 대량 데이터에도 강함.
- 단점: 설정 및 튜닝이 필요하며, 아주 작은 지연 시간에는 더 가벼운 시스템이 필요할 수 있음.
- 💡 사용 예시: 실시간 사용자 검색어 트렌드 파악 및 자동완성 추천 순위 조정.

3) 아파치 스톰 (Apache Storm)
- 초저지연 스트리밍 처리 시스템.
- 장점: 0.1초 미만의 응답 시간으로 매우 빠르며, 실시간 이벤트 처리에 적합.
- 단점: 복잡한 분석에는 부적합하고, 유지 보수와 확장성이 다소 어려움.
- 💡 사용 예시: 검색어 입력 시 즉각적인 자동완성 추천.

4) 아파치 카프카 (Apache Kafka)
- 분산 메시지 시스템으로 대규모 실시간 데이터 스트림을 처리하고 저장.
- 장점: 높은 처리량, 내구성, 다양한 스트림 처리 도구와 통합 가능.
- 단점: 자체적으로 데이터 처리 기능은 약하고, 스파크 또는 다른 스트리밍 프레임워크와 함께 사용해야 함.
- 💡 사용 예시: 실시간 로그 수집 및 이벤트 스트리밍, 다른 시스템과 연동해 검색어 데이터 전송.

5) 엘라스틱 서치
- 실시간 데이터 처리
  Elasticsearch는 실시간으로 데이터를 색인화하고, 이를 즉시 검색할 수 있게 해줌.
- https://dgahn.tistory.com/44
