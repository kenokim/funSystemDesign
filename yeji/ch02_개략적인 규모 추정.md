# 2장 개략적인 규모 추정

- 시스템 용량이나 성능 요구사항을 개략적으로 추정
- back-of-the-envelope esrimation 개략적인 규모 추정
    - 성능 수치상에서 사고실험을 행하여 추정치를 계산
- 규모 확장성을 표현하는데 필요한 기본기 - 2의 제곱수[2] ,응답지연값, 가용성

### [2의 제곱수]

- 데이터 볼륨의 단위를 2의 제곱수로 표현
    - 8비트=1바이트
    - 2*10 = 1킬로바이트 = 1000
    - 2*20 = 1메가마이트 = 1백만
    - 2*30 = 1기가바이트 = 10억

### [응답지연값]

- 빠른 메모리, 단순 압축 알고리즘은 빠름
    - l1,l2 캐시참조, 분기예측오류, 뮤텍스 락/억락, 일반네트워크에서 2kb전송 → ns
    - 주메모리 참조 →100ns
    - zippy로 1kb 압축, 메모리에서 1M 순차적읽기 → 2000ns +
    - 
- 디스크는 아직 느림 , 데이터 센터는 보통 지역에 분산되어있고 시간이 걸림, 인터넷전송전에 압축하라
    - ssd 상에서 임의 위치의 데이터 읽기 → 16,000ns + , ssd상에서 1m 순차적 읽기 → 49,000
    - 동일 데이터 센터내의 패킬 왕복 지연시간 → 500,000
    - 디스크 탐색 → 2,000,000 , 디스크에서 1m 순차적읽기 825,000
    - 다른지역의 패킷 왕복 지연시간 → 150,000,000

### [가용성에 관계된 수치들]

- 고가용성 : 오랜 시간동안 지속적으로 중단없이 운영될 수 있는 능력,  퍼센트로 나타냄
    - SLA(service level agreement) 99~99.9999 ~ 100%를 가져야함 (14.4분 )
- QPS : query per second ,최대 QPS, 저장소 요구량, 캐시요구량, 서버 수
    - 일간 사용자 x 트윗 수
    - 최대 QPS (peek) = *2
    - 평균 트윗 크기 일당 계산.* 데이터 보관 년도

- https://highscalability.com/google-pro-tip-use-back-of-the-envelope-calculations-to-choo/
    - 쓰기 작업은 읽기보다 40배 더 비쌈
    - 30개의 썸네일 이미지 생성 페이지 예시→ 직렬/병렬
- 시스템 설계 준비 깃헙 https://github.com/donnemartin/system-design-primer

Q 가용성이 99.9 인 두개의 서버가 **Active-active(병렬)/ Active-passive(직렬)** 일때의 가용성은?
